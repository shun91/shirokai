google.load("feeds","1");function writeGatcha(s,t,r,q,m){if(void 0===t||null==t){t="side-";}if(void 0===m||null==m||1!=m){m=!1;}var o=null;if("category"==r){var p=document.querySelectorAll("div.categories a");if(null!=p&&0<p.length){for(var o=[],n=0;n<p.length;n++){var j=p[n].href,i=j.replace(getBlogUrl(),"");console.log(i);0>i.indexOf("-")&&0<=j.indexOf(getBlogUrl()+"/archive/category/")&&o.push(p[n]);}n=Math.floor(Math.random()*o.length);o=o[n];}}p="";p=void 0!==o&&null!=o?o.href.replace(getBlogUrl()+"/archive/category/",""):"recent"==r?"gatcha-new":"";void 0!==q&&null!=q?(document.write('<div class="gatcha-box"><div class="hatena-module-title">'+q+"</div>"),500<window.innerWidth?(document.write('<span class="gatchaForm">'),writeForm(t,p,s,m),document.write("</span>")):writeForm(t,p,s),document.write("</span>")):writeForm(t,p,s);document.write('<span id="'+t+'gachaSpan"></span>');switchGatchButton(!1,t);}function writeForm(e,f,h,g){document.write('<select id="'+e+'inGatchaCategory" onchange="runGatcha(\''+e+'\')" style="width:150px;"><select>');document.write(' <input type="button" id="'+e+'btnNormalGatcha" value=" \u66f4\u65b0 " onClick="runGatcha(\''+e+"')\" />");document.write(' <input type="button" id="'+e+'btnMoveGatcha" value=" \u4e00\u89a7 " onClick="moveGatcha(\''+e+"')\" />");g&&document.write(' <input type="button" id="'+e+'btnFeedlyGatcha" value=" \u8cfc\u8aad " onClick="feedGatcha(\''+e+"')\" />");document.write('<input type="hidden" id="'+e+'inGatchaNum" value="'+h+'" />');document.write('<input type="hidden" id="'+e+'mode" value="'+f+'" />');e=document.getElementById(e+"inGatchaCategory");e.appendChild(createOption("gatcha-rare","\u4eba\u6c17"));e.appendChild(createOption("gatcha-new","\u6700\u65b0"));e.selectedIndex=1;}function writeGatchaCategory(d){if(void 0===d||null==d){d="side-";}var e=getBlogUrl(),f=document.getElementById(d+"inGatchaCategory"),e=document.getElementById(d+"mode").value.replace(e+"/archive/category/",""),e=createOption(e,decodeURI(e));f.appendChild(e);e.selected=!0;runGatcha(d);}function createOption(d,e){var f=document.createElement("option");f.value=d;f.text=e;return f;}function switchGatchButton(d,e){document.getElementById(e+"btnNormalGatcha").disabled=!d;document.getElementById(e+"btnMoveGatcha").disabled=!d;document.getElementById(e+"inGatchaCategory").disabled=!d;var f=document.getElementById(e+"btnFeedlyGatcha");null!=f&&(f.disabled=!d);}function feedGatcha(e){switchGatchButton(!1,e);var f="",f=getBlogUrl(),h=document.getElementById(e+"inGatchaCategory"),g=h.selectedIndex,f=0==g||2==g?f+"/feed":1==g?"http://b.hatena.ne.jp/entrylist?sort=count&mode=rss&url="+encodeURIComponent(f):f+"/rss/category/"+h.value;switchGatchButton(!0,e);window.open("http://cloud.feedly.com/#subscription%2Ffeed%2F"+encodeURIComponent(f));}function moveGatcha(e){switchGatchButton(!1,e);var f="",f=getBlogUrl(),h=document.getElementById(e+"inGatchaCategory"),g=h.selectedIndex,f=0==g||2==g?f+"/archive":1==g?"http://b.hatena.ne.jp/entrylist?sort=count&url="+encodeURIComponent(f):f+"/archive/category/"+h.value;switchGatchButton(!0,e);location.href=f;}function runGatcha(d){switchGatchButton(!1,d);var e=document.getElementById(d+"inGatchaCategory"),f=e.selectedIndex;0==f?runRareGatcha(d):1==f?runNewGatcha(d):runCategoryGatcha(d,e.value);switchGatchButton(!0,d);}function runCommonGatcha(e,f){var h=document.getElementById(e+"inGatchaNum").value,g=new google.feeds.Feed(f);g.setNumEntries(50);g.load(function(b){var c=[];!b.error&&0<b.feed.entries.length&&(c=b.feed.entries);c=removeThisEntry(c);b=document.getElementById(e+"gachaSpan");createOwnHtml(b,null,c,null,h);});}function runNewGatcha(c){var d=getBlogUrl();runCommonGatcha(c,d+"/rss");}function runRareGatcha(c){var d=getBlogUrl(),d="http://b.hatena.ne.jp/entrylist?sort=count&mode=rss&url="+encodeURIComponent(d);runCommonGatcha(c,d);}function runCategoryGatcha(d,e){var f=getBlogUrl()+"/rss/category/"+e;runCommonGatcha(d,f);}